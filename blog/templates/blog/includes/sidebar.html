<aside class="sidebar">
    <!-- Search Widget -->
    <div style="margin-bottom: 2rem;">
        <h3><i class="fas fa-search"></i> Search</h3>
        <form method="get" action="{% url 'blog:post_list' %}" style="display: flex;">
            <input type="text" name="q" placeholder="Search posts..." style="flex: 1; padding: 0.75rem; border: 2px solid var(--border); border-radius: 5px 0 0 5px; font-size: 0.95rem;">
            <button type="submit" style="background: var(--secondary); color: white; border: none; padding: 0.75rem 1rem; border-radius: 0 5px 5px 0; cursor: pointer;">
                <i class="fas fa-search"></i>
            </button>
        </form>
    </div>
    
    <!-- Categories Widget -->
    <div style="margin-bottom: 2rem;">
        <h3><i class="fas fa-folder"></i> Categories</h3>
        <ul>
            {% for category in categories %}
            <li>
                <a href="{% url 'blog:category' category.slug %}" style="display: flex; justify-content: space-between; align-items: center;">
                    <span>{{ category.name }}</span>
                    <span style="background: var(--bg-light); padding: 0.25rem 0.5rem; border-radius: 10px; font-size: 0.875rem;">
                        {{ category.posts.count }}
                    </span>
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    
    <!-- Recent Posts Widget -->
    <div style="margin-bottom: 2rem;">
        <h3><i class="fas fa-clock"></i> Recent Posts</h3>
        <ul style="list-style: none; padding: 0;">
            {% load blog_tags %}
            {% get_recent_posts 5 as recent_posts %}
            {% for post in recent_posts %}
            <li style="padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
                <a href="{{ post.get_absolute_url }}" style="font-weight: 500; display: block; margin-bottom: 0.25rem;">
                    {{ post.title|truncatewords:8 }}
                </a>
                <small style="color: var(--text-light);">
                    <i class="fas fa-calendar"></i> {{ post.published_date|date:"M d, Y" }}
                </small>
            </li>
            {% endfor %}
        </ul>
    </div>
    
    <!-- Popular Tags Widget -->
    <div style="margin-bottom: 2rem;">
        <h3><i class="fas fa-tags"></i> Popular Tags</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            {% load blog_tags %}
            {% get_popular_tags as popular_tags %}
            {% for tag in popular_tags %}
            <a href="{% url 'blog:tag' tag.slug %}" style="display: inline-block; background: var(--bg-light); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.875rem; border: 1px solid var(--border);">
                {{ tag.name }}
            </a>
            {% endfor %}
        </div>
    </div>
    
    <!-- Newsletter Widget -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: 8px; color: white;">
        <h3 style="color: white; margin-bottom: 1rem;">
            <i class="fas fa-envelope"></i> Stay Updated
        </h3>
        <p style="margin-bottom: 1rem; font-size: 0.9rem;">
            Get book recommendations delivered to your inbox
        </p>
        <form method="post" action="{% url 'blog:newsletter_subscribe' %}">
            {% csrf_token %}
            <input type="email" name="email" placeholder="Your email" required style="width: 100%; padding: 0.75rem; border: none; border-radius: 5px; margin-bottom: 0.75rem;">
            <button type="submit" style="width: 100%; background: var(--secondary); color: white; border: none; padding: 0.75rem; border-radius: 5px; font-weight: 600; cursor: pointer;">
                Subscribe
            </button>
        </form>
    </div>
</aside>
{% extends 'blog/base.html' %}

{% block title %}{{ post.meta_title }} - The Readers Hut{% endblock %}
{% block meta_description %}{{ post.meta_description }}{% endblock %}

{% block content %}
<div class="container">
    <div class="blog-grid">
        <!-- Main Content -->
        <article>
            <!-- Breadcrumb -->
            <nav style="margin-bottom: 1.5rem; font-size: 0.9rem; color: var(--text-light);">
                <a href="{% url 'blog:home' %}">Home</a> / 
                <a href="{% url 'blog:category' post.category.slug %}">{{ post.category.name }}</a> / 
                <span>{{ post.title|truncatewords:5 }}</span>
            </nav>
            
            <!-- Post Header -->
            <header style="margin-bottom: 2rem;">
                <div style="margin-bottom: 1rem;">
                    <span class="post-category">{{ post.category.name }}</span>
                </div>
                <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">{{ post.title }}</h1>
                <div class="post-meta" style="font-size: 1rem;">
                    <span><i class="fas fa-user"></i> {{ post.author.get_full_name|default:post.author.username }}</span>
                    <span><i class="fas fa-calendar"></i> {{ post.published_date|date:"F d, Y" }}</span>
                    <span><i class="fas fa-clock"></i> {% load blog_tags %}{{ post.content|reading_time }} min read</span>
                    <span><i class="fas fa-eye"></i> {{ post.views }} views</span>
                </div>
            </header>
            
            <!-- Featured Image -->
            {% if post.featured_image %}
            <div style="margin-bottom: 2rem;">
                <img src="{{ post.featured_image.url }}" alt="{{ post.featured_image_alt }}" style="width: 100%; height: auto; border-radius: 12px;">
            </div>
            {% endif %}
            
            <!-- Post Content -->
            <div style="line-height: 1.8; font-size: 1.1rem; margin-bottom: 3rem;">
                {{ post.content|safe }}
            </div>
            
            <!-- Tags -->
            {% if post.tags.all %}
            <div style="margin-bottom: 3rem; padding: 1.5rem; background: var(--bg-light); border-radius: 8px;">
                <strong style="display: block; margin-bottom: 1rem;">Tags:</strong>
                {% for tag in post.tags.all %}
                <a href="{% url 'blog:tag' tag.slug %}" style="display: inline-block; background: var(--white); padding: 0.5rem 1rem; border-radius: 20px; margin-right: 0.5rem; margin-bottom: 0.5rem; border: 1px solid var(--border);">
                    <i class="fas fa-tag"></i> {{ tag.name }}
                </a>
                {% endfor %}
            </div>
            {% endif %}
            
            <!-- Share Buttons -->
            <div style="margin-bottom: 3rem; padding: 1.5rem; background: var(--bg-light); border-radius: 8px; text-align: center;">
                <strong style="display: block; margin-bottom: 1rem; font-size: 1.1rem;">Share This Review</strong>
                <div>
                    <a href="https://twitter.com/intent/tweet?text={{ post.title }}&url={{ request.build_absolute_uri }}" target="_blank" style="display: inline-block; background: #1DA1F2; color: white; padding: 0.75rem 1.5rem; border-radius: 5px; margin: 0.5rem;">
                        <i class="fab fa-twitter"></i> Twitter
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" style="display: inline-block; background: #4267B2; color: white; padding: 0.75rem 1.5rem; border-radius: 5px; margin: 0.5rem;">
                        <i class="fab fa-facebook"></i> Facebook
                    </a>
                    <a href="https://wa.me/?text={{ post.title }} {{ request.build_absolute_uri }}" target="_blank" style="display: inline-block; background: #25D366; color: white; padding: 0.75rem 1.5rem; border-radius: 5px; margin: 0.5rem;">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>
                </div>
            </div>
            
            <!-- Related Posts -->
            {% if related_posts %}
            <section style="margin-top: 4rem;">
                <h2 style="font-size: 2rem; margin-bottom: 2rem;">You May Also Like</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                    {% for related in related_posts %}
                    <article class="post-card">
                        {% if related.featured_image %}
                        <img src="{{ related.featured_image.url }}" alt="{{ related.featured_image_alt }}" class="post-card-image" style="height: 200px;">
                        {% else %}
                        <div class="post-card-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 200px;"></div>
                        {% endif %}
                        <div class="post-card-content">
                            <span class="post-category">{{ related.category.name }}</span>
                            <h3 style="font-size: 1.2rem;"><a href="{{ related.get_absolute_url }}">{{ related.title|truncatewords:10 }}</a></h3>
                            <a href="{{ related.get_absolute_url }}" class="read-more">Read More</a>
                        </div>
                    </article>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
        </article>
        
        <!-- Sidebar -->
        {% include 'blog/includes/sidebar.html' %}
    </div>
</div>

<style>
    @media (max-width: 1024px) {
        .container > div {
            display: grid;
            grid-template-columns: 1fr; /* single column */
            gap: 2rem;
        }

        .blog-grid {
            grid-template-columns: 1fr; /* single column on tablet/mobile */
        }

        aside.sidebar {
            margin-top: 2rem;
        }
    }

</style>
{% endblock %}